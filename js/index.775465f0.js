(function(){"use strict";var e={8287:function(e,t,a){var r=a(5130),n=a(5234),s=a(6768);const i={id:"app"};function o(e,t,a,r,n,o){const l=(0,s.g2)("GymLeaderboard");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(l)])}var l=a(4232),d=a.p+"img/ttk_logo.3a1a1c45.svg";const c={class:"container py-5 text-center"},u={key:0,class:"text-center mb-4 text-white"},f={key:1,class:"row g-4"};function h(e,t,a,r,n,i){const o=(0,s.g2)("ExerciseCard");return(0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",{class:(0,l.C4)([["logo-wrapper",{"with-background":r.logoHasBackground}],"mb-4"])},t[0]||(t[0]=[(0,s.Lk)("img",{src:d,alt:"Gym Logo",class:"logo mb-3"},null,-1),(0,s.Lk)("h1",{class:"text-center mb-2 title"},"JÃµusaali edetabel",-1)]),2),r.loading?((0,s.uX)(),(0,s.CE)("div",u,"Laeb, oota natsa, musi..")):((0,s.uX)(),(0,s.CE)("div",f,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.visibleExercises,(e=>((0,s.uX)(),(0,s.Wv)(o,{key:e.name,title:e.name,entries:r.formatEntries(e.name),hasBackground:!1},null,8,["title","entries"])))),128))]))])}const v={class:"col-6"},m={key:0,class:"card-title text-center"},g={class:"rank-container"},p={key:0,class:"medal gold"},b={key:1,class:"medal silver"},k={key:2,class:"medal bronze"},y={key:3,class:"rank"},E={class:"player-details"},C={class:"player-score"},A={class:"result-date"};function L(e,t,a,n,i,o){return(0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("div",{class:(0,l.C4)(["leaderboard-card",{"with-background":a.hasBackground}])},[(0,s.bF)(r.eB,{name:"fade-title"},{default:(0,s.k6)((()=>[i.showTitle?((0,s.uX)(),(0,s.CE)("h5",m,(0,l.v_)(a.title),1)):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(r.F,{name:"fade-stagger",tag:"div"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.visibleEntries,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"leaderboard-entry",key:`entry-${t}`},[(0,s.Lk)("div",g,[0===t?((0,s.uX)(),(0,s.CE)("div",p,"ðŸ¥‡")):1===t?((0,s.uX)(),(0,s.CE)("div",b,"ðŸ¥ˆ")):2===t?((0,s.uX)(),(0,s.CE)("div",k,"ðŸ¥‰")):((0,s.uX)(),(0,s.CE)("div",y,(0,l.v_)(t+1),1))]),(0,s.Lk)("div",E,[(0,s.Lk)("div",{class:(0,l.C4)(["player-name",o.nameSizeClass(t)])},(0,l.v_)(e.name),3)]),(0,s.Lk)("div",C,(0,l.v_)(e.score),1),(0,s.Lk)("div",A,(0,l.v_)(e.result_date),1)])))),128))])),_:1})],2)])}var _={name:"ExerciseCard",props:{title:String,entries:{type:Array,required:!0,default:()=>[]},hasBackground:Boolean},data(){return{showTitle:!1,visibleEntriesCount:0}},computed:{limitedEntries(){return this.entries.slice(0,10)},visibleEntries(){return this.limitedEntries.slice(0,this.visibleEntriesCount)}},mounted(){this.startAnimation()},methods:{startAnimation(){setTimeout((()=>{this.showTitle=!0,this.limitedEntries.forEach(((e,t)=>{setTimeout((()=>{this.visibleEntriesCount=t+1}),100*(t+1))}))}),200)},nameSizeClass(e){return 0===e?"first-place":1===e?"second-place":2===e?"third-place":"regular-place"}}},w=a(1241);const x=(0,w.A)(_,[["render",L],["__scopeId","data-v-72608be9"]]);var X=x,O=a(4373),M=a(144);const S=(0,n.nY)({id:"gymLeaderboardStore",state:()=>({sheetId:"1Zfk-3eZ1Lpls1WG0ijq2KnP5sLFEFOwXULKphFkRq3g",apiKey:"AIzaSyB6p49AiMgUkTU4bqydkhXfGjvRp4M_Te0",range:"A2:K11",exercises:[{name:"Rinnalt surumine MAX (Mehed)"},{name:"Rinnalt surumine MAX (Naised)"},{name:"Cooperi-test (Mehed)"},{name:"Cooperi-test (Naised)"},{name:"Rinnalt surumine 50kg (Mehed)"},{name:"Rinnalt surumine 50kg (Naised)"},{name:"KÃ¼kk MAX (Mehed)"},{name:"KÃ¼kk MAX (Naised)"}],leaderboardData:{},loading:!1,inProgress:!1}),actions:{isDataEqual(e,t){const a=(0,M.ux)(t);return JSON.stringify(e)===JSON.stringify(a)},async fetchAllLeaderboardData(){if(this.inProgress)console.log("Another request is already in progress. Skipping this request.");else{this.inProgress=!0,this.loading=!0,console.log("Fetching leaderboard data for all sheets...");try{const e=this.exercises.map((e=>{const t=encodeURIComponent(e.name);return O.A.get(`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${t}!${this.range}?key=${this.apiKey}`)})),t=await Promise.all(e),a={};t.forEach(((e,t)=>{if(e.data&&e.data.values){const r=e.data["values"].filter((e=>e.length>1&&e[1].trim().length>0)).map((e=>e)),n=this.exercises[t].name;a[n]=r}}));let r=!1;for(const n in a)if(!this.isDataEqual(a[n],this.leaderboardData[n])){r=!0;break}r?(console.log("Leaderboard data updated."),this.leaderboardData=a):console.log("Leaderboard data is the same. No update needed.")}catch(e){console.error("Error fetching leaderboard data:",e)}finally{this.inProgress=!1,this.loading=!1}}},startAutoRefetch(e=3e6){this.fetchAllLeaderboardData(),setInterval((async()=>{await this.fetchAllLeaderboardData()}),e)}}});var j={name:"GymLeaderboard",components:{ExerciseCard:X},setup(){const e=S(),t=(0,s.EW)((()=>e.exercises)),a=(0,s.EW)((()=>e.loading)),r=(0,M.KR)(0),n=(0,M.KR)([]),i=(0,s.EW)((()=>r.value%2===0)),o=()=>{n.value=t.value.slice(r.value,r.value+2),r.value=(r.value+2)%t.value.length},l=t=>e.leaderboardData[t]?e.leaderboardData[t].map((e=>({name:e[10]||"Unknown",score:e[3]||"N/A",result_date:e[4]||"N/A"}))):[];return(0,s.sV)((()=>{e.startAutoRefetch(3e5),o(),setInterval(o,13e3)})),{loading:a,visibleExercises:n,formatEntries:l,logoHasBackground:i}}};const F=(0,w.A)(j,[["render",h],["__scopeId","data-v-07eec6be"]]);var K=F,R={name:"App",components:{GymLeaderboard:K}};const T=(0,w.A)(R,[["render",o]]);var D=T;a(323);const I=(0,n.Ey)(),P=(0,r.Ef)(D);P.use(I),P.mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,s){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/gym-leaderboard/"}(),function(){var e={57:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,i=r[0],o=r[1],l=r[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(t&&t(r);d<i.length;d++)s=i[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},r=self["webpackChunkttk_jousaali_edetabel"]=self["webpackChunkttk_jousaali_edetabel"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(8287)}));r=a.O(r)})();
//# sourceMappingURL=index.775465f0.js.map